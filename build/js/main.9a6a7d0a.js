"use strict";(self.webpackChunkfh5_telemetry=self.webpackChunkfh5_telemetry||[]).push([[179],{579:(e,t,n)=>{var o=n(212),i=n(875),r=n(460),a=n.n(r),l=n(886);let d,s,u,c,h,p,w,g,f,m,b,y=[],x=[],C=[],v=null,B=null,E=null,k=new i.XS,F={},H=new o.iMs,P=new o.FM8,S=[50,50,50];function z(e){S=e,h.setClearColor((new o.Ilk).setRGB(e[0]/256,e[1]/256,e[2]/256))}function A(){h.render(c,s)}function I(){requestAnimationFrame(I),u.update(),A()}function T(e){console.log("addpar with col: "+e);let t=y.length;d=y.length,p=new o.u9r,w=new Float32Array(3*t),f=new Float32Array(3*t),m=new Float32Array(3*t),g=0;for(let e=0;e<t;e++)w[g]=y[e][0],w[g+1]=y[e][1],w[g+2]=y[e][2],f[g]=x[e][0],f[g+1]=x[e][1],f[g+2]=x[e][2],m[g]=C[e][0],m[g+1]=C[e][1],m[g+2]=C[e][2],g+=3;p.setAttribute("position",new o.TlE(w.subarray(0,g),3)),1==e?p.setAttribute("color",new o.TlE(f.subarray(0,g),3)):p.setAttribute("color",new o.TlE(m.subarray(0,g),3)),p.computeBoundingSphere(),p.computeBoundingBox();let n=new o.UY4({size:25,vertexColors:o.jSK});v=new o.woe(p,n),b.add(v),b.remove(B),B=new o.fQA(v,1710618),B.visible=!1,b.add(B),p.computeBoundingSphere(),p.computeBoundingBox(),W(t+" points"),j(p),I()}o.Tme.DefaultUp=new o.Pa4(0,0,1),window.addEventListener("mousemove",(function(e){P.x=e.clientX/window.innerWidth*2-1,P.y=-e.clientY/window.innerHeight*2+1}),!1),window.addEventListener("mousedown",(function(e){if(e.shiftKey){H.setFromCamera(P,s);let e=H.intersectObject(v);e.length&&u.target.copy(e[0].point.clone())}}),!0),function(){E={backgroundColor:S,boxVisible:!1};let e=document.querySelector(".dg div ul"),t=document.createElement("p");t.textContent="Help Finish this pointMap of forza horizon 5\n\n\t\t\t\t\tJust add the ip and port from below into your data out settings in FH5 and your done.\n\t\t\t\t\t",t.setAttribute("style","font-size:1.5em;text-align: left;"),e.append(t),k.add({Github:"https://github.com/fh5-telemetry-parser"},"Github"),k.add({DataOutIP:"securityb.us"},"DataOutIP"),k.add({Port:"5300"},"Port"),F.backgroundColor=k.addColor(E,"backgroundColor").name("Background").onChange((function(e){z(e)})),F.boxVisible=k.add(E,"boxVisible").name("Bounding box").onChange((function(e){B.visible=e})),k.add({ColorSchema:"Height"},"ColorSchema",["Height","Terrain"]).onChange((function(e){T("Height"==e?2:1)}))}(),c=new o.xsS,h=new o.CP7({preserveDrawingBuffer:!1,antialias:!0}),z(E.backgroundColor),h.setPixelRatio(window.devicePixelRatio),h.setSize(window.innerWidth,window.innerHeight),document.getElementById("container").appendChild(h.domElement),s=new o.cPb(70,window.innerWidth/window.innerHeight,1,2e4),u=new l.z(s,h.domElement),u.addEventListener("change",A),b=new o.Tme,c.add(b),window.addEventListener("resize",(function(){s.aspect=window.innerWidth/window.innerHeight,s.updateProjectionMatrix(),h.setSize(window.innerWidth,window.innerHeight)}),!1);let L=0,M=0;setInterval((()=>{fetch("pos.txt").then((e=>e.text())).then((e=>{if(0!=L){M=e.split("\n");let t=M.length-L;if(0==t)return;console.log(M.length-L);let n=((e,t=1)=>[...e].splice(-t,t))(M,t).join("\n");console.log(n),O(n),L=e.split("\n").length}else L=e.split("\n").length}))}),5e3),console.log("addingg data"),fetch("pos.txt").then((e=>e.text())).then((e=>{O(e)}));const O=e=>{W("Parsing point list file...");let t=0;a().parse(e,{delimiter:" ",worker:!0,step:function(e){if(!e.errors.length&&e.data.length){if(e.data.length<3)return;let n=[100/255,100/255,e.data[1]/510];if(C.push(n),1==e.data[3]){let e=[136/255,119/255,89/255];x.push(e)}else if(2==e.data[3]){let e=[30/255,62/255,73/255];x.push(e)}else{let e=[205/255,205/255,205/255];x.push(e)}let o=[parseFloat(e.data[1]),parseFloat(e.data[0]),parseFloat(e.data[2])];y.push(o),W(t+" points parsed..."),t++}},complete:function(e){console.log("all "+y.length+" points parsed."),W(""),T()}})};function W(e){document.getElementById("loadInfo").innerHTML=e}function j(e,t,n){j=function(){},v.geometry.attributes.position.needsUpdate=!0,e.boundingBox.getCenter(),s.position.x=8856.649926816266,s.position.y=-1652.100896578187,s.position.z=1e3,u.target.copy(e.boundingBox.getCenter())}}},e=>{e.O(0,[647],(()=>(579,e(e.s=579)))),e.O()}]);